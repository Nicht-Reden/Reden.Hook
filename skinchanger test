local repo = 'https://raw.githubusercontent.com/violin-suzutsuki/LinoriaLib/main/'
local Library = loadstring(game:HttpGet(repo .. 'Library.lua'))()
local ThemeManager = loadstring(game:HttpGet(repo .. 'addons/ThemeManager.lua'))()
local SaveManager = loadstring(game:HttpGet(repo .. 'addons/SaveManager.lua'))()

local Window = Library:CreateWindow({
    Title = 'Reden.Hook',
    Center = true,
    AutoShow = true,
    TabPadding = 8,
    MenuFadeTime = 0.2
})

local Tabs = {
    Combat = Window:AddTab('Combat'),
    Visuals = Window:AddTab('Visuals'),
    Misc = Window:AddTab('Misc'),
    StreamProtection = Window:AddTab('Stream Protection'),
    Settings = Window:AddTab('Settings'),
}

local VisualsGroup = Tabs.Visuals:AddRightGroupbox('Crosshair')

local crosshairEnabled = false
local crosshairSpinSpeed = 3.5
local crosshairText = "Reden.Hook"
local crosshairColor = Color3.fromRGB(255, 255, 255)
local crosshairSize = 27.8
local crosshairThickness = 2.3
local crosshairGap = 8.9
local outlineThickness = 2
local centerDotEnabled = true
local textOffsetY = 20
local crosshairOffsetX = 0
local crosshairOffsetY = -29.3
local rainbowMode = false
local rainbowSpeed = 2.2
local crosshairGui = nil
local spinConnection = nil
local rainbowConnection = nil

local fullbrightEnabled = false
local lightColorEnabled = false
local lightColor = Color3.fromRGB(135, 206, 235)
local originalLighting = {}

local autoCrouchEnabled = false
local crouchTime = 1 
local beforeRepeatDelay = 0.5 
local isAutoCrouching = false

local speedHackEnabled = false
local speedMultiplier = 2.5
local speedConnection = nil
local speedRandomization = true
local speedVariance = 0.1

local keybindListEnabled = false
local keybindListAlwaysShow = true
local keybindListGui = nil
local keybindUpdateConnection = nil
local keybindCache = {}
local keybindDragging = false
local keybindDragStart = nil
local keybindStartPos = nil

local espEnabled = false
local espBoxEnabled = true
local espNameEnabled = true
local espHealthEnabled = true
local espDistanceEnabled = true
local espBoxColor = Color3.fromRGB(255, 255, 255)
local espNameColor = Color3.fromRGB(255, 255, 255)
local espHealthColor = Color3.fromRGB(0, 255, 0)
local espBoxThickness = 1
local espTextSize = 13
local espMaxDistance = 1000
local espRainbow = false
local espConnection = nil
local espObjects = {}
local espUpdateRate = 0.01
local espLastUpdate = 0
local espFillBox = false
local espFillTransparency = 0.1

local aimbotEnabled = false
local aimbotFOV = 150
local aimbotSmoothing = 0.15
local aimbotTargetPart = "Head"
local aimbotConnection = nil
local fovCircle = nil
local showFOV = true
local fovColor = Color3.fromRGB(255, 255, 255)
local fovTransparency = 0.5
local aimbotMouseButton = "Right"
local aimbotStickiness = 0.8
local aimbotMaxLockTime = 2.0
local aimbotLockCooldown = 1.0
local aimbotLockStartTime = 0
local aimbotIsLocked = false
local aimbotOnCooldown = false
local aimbotCooldownStartTime = 0
local aimbotMaxDistance = 500
local aimbotIgnoreDistance = false

local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

local function getRainbowColor(offset)
    local hue = (tick() * rainbowSpeed * 0.5 + (offset or 0)) % 1
    return Color3.fromHSV(hue, 1, 1)
end

local function getRandomSpeedVariance()
    if speedRandomization then
        return (math.random() * speedVariance * 2) - speedVariance
    end
    return 0
end

local function createESP(player)
    if espObjects[player] then
        return
    end
    
    local drawings = {
        box = Drawing.new("Square"),
        boxFill = Drawing.new("Square"),
        name = Drawing.new("Text"),
        health = Drawing.new("Text"),
        distance = Drawing.new("Text"),
        healthBar = Drawing.new("Square"),
        healthBarOutline = Drawing.new("Square")
    }
    
    drawings.box.Thickness = espBoxThickness
    drawings.box.Filled = false
    drawings.box.Color = espBoxColor
    drawings.box.Visible = false
    drawings.box.ZIndex = 2
    
    drawings.boxFill.Filled = true
    drawings.boxFill.Color = espBoxColor
    drawings.boxFill.Transparency = espFillTransparency
    drawings.boxFill.Visible = false
    drawings.boxFill.ZIndex = 1
    
    drawings.name.Size = espTextSize
    drawings.name.Color = espNameColor
    drawings.name.Center = true
    drawings.name.Outline = true
    drawings.name.Visible = false
    drawings.name.ZIndex = 3
    drawings.name.Font = 2
    
    drawings.health.Size = espTextSize - 1
    drawings.health.Color = espHealthColor
    drawings.health.Center = true
    drawings.health.Outline = true
    drawings.health.Visible = false
    drawings.health.ZIndex = 3
    drawings.health.Font = 2
    
    drawings.distance.Size = espTextSize - 2
    drawings.distance.Color = Color3.fromRGB(200, 200, 200)
    drawings.distance.Center = true
    drawings.distance.Outline = true
    drawings.distance.Visible = false
    drawings.distance.ZIndex = 3
    drawings.distance.Font = 2
    
    drawings.healthBarOutline.Thickness = 1
    drawings.healthBarOutline.Filled = true
    drawings.healthBarOutline.Color = Color3.fromRGB(0, 0, 0)
    drawings.healthBarOutline.Visible = false
    drawings.healthBarOutline.ZIndex = 2
    
    drawings.healthBar.Filled = true
    drawings.healthBar.Color = Color3.fromRGB(0, 255, 0)
    drawings.healthBar.Visible = false
    drawings.healthBar.ZIndex = 3
    
    espObjects[player] = drawings
end

local function removeESP(player)
    local drawings = espObjects[player]
    if drawings then
        for _, drawing in pairs(drawings) do
            drawing:Remove()
        end
        espObjects[player] = nil
    end
end

local function getHealthColor(health, maxHealth)
    local percentage = health / maxHealth
    if percentage > 0.75 then
        return Color3.fromRGB(0, 255, 0)
    elseif percentage > 0.5 then
        return Color3.fromRGB(255, 255, 0)
    elseif percentage > 0.25 then
        return Color3.fromRGB(255, 165, 0)
    else
        return Color3.fromRGB(255, 0, 0)
    end
end

local function updateESP()
    if not espEnabled then return end
    
    local currentTime = tick()
    if currentTime - espLastUpdate < espUpdateRate then
        return
    end
    espLastUpdate = currentTime
    
    for player, drawings in pairs(espObjects) do
        local success = pcall(function()
            if not player or not player.Parent or player == LocalPlayer then
                for _, drawing in pairs(drawings) do
                    drawing.Visible = false
                end
                return
            end
            
            local character = player.Character
            if not character then
                for _, drawing in pairs(drawings) do
                    drawing.Visible = false
                end
                return
            end
            
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            local rootPart = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
            
            if not humanoid or not rootPart or humanoid.Health <= 0 then
                for _, drawing in pairs(drawings) do
                    drawing.Visible = false
                end
                return
            end
            
            local distance = (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")) and
                (LocalPlayer.Character.HumanoidRootPart.Position - rootPart.Position).Magnitude or math.huge
            
            if distance > espMaxDistance then
                for _, drawing in pairs(drawings) do
                    drawing.Visible = false
                end
                return
            end
            
            local head = character:FindFirstChild("Head")
            if not head then
                for _, drawing in pairs(drawings) do
                    drawing.Visible = false
                end
                return
            end
            
            local headPos = head.Position + Vector3.new(0, head.Size.Y / 2, 0)
            local legPos = rootPart.Position - Vector3.new(0, rootPart.Size.Y + 1, 0)
            
            local headScreen, headOnScreen = Camera:WorldToViewportPoint(headPos)
            local legScreen, legOnScreen = Camera:WorldToViewportPoint(legPos)
            
            if not headOnScreen and not legOnScreen then
                for _, drawing in pairs(drawings) do
                    drawing.Visible = false
                end
                return
            end
            
            local height = math.abs(headScreen.Y - legScreen.Y)
            local width = height / 2
            local boxX = (headScreen.X + legScreen.X) / 2 - width / 2
            local boxY = math.min(headScreen.Y, legScreen.Y)
            
            local boxColor = espBoxColor
            if espRainbow then
                boxColor = getRainbowColor(player.UserId % 10)
            end
            
            if espBoxEnabled then
                drawings.box.Size = Vector2.new(width, height)
                drawings.box.Position = Vector2.new(boxX, boxY)
                drawings.box.Color = boxColor
                drawings.box.Thickness = espBoxThickness
                drawings.box.Visible = true
                
                if espFillBox then
                    drawings.boxFill.Size = Vector2.new(width, height)
                    drawings.boxFill.Position = Vector2.new(boxX, boxY)
                    drawings.boxFill.Color = boxColor
                    drawings.boxFill.Transparency = espFillTransparency
                    drawings.boxFill.Visible = true
                else
                    drawings.boxFill.Visible = false
                end
            else
                drawings.box.Visible = false
                drawings.boxFill.Visible = false
            end
            
            if espNameEnabled then
                local displayName = player.DisplayName
                if #displayName > 15 then
                    displayName = displayName:sub(1, 15) .. "..."
                end
                drawings.name.Text = displayName
                drawings.name.Position = Vector2.new(boxX + width / 2, boxY - 16)
                drawings.name.Color = espRainbow and getRainbowColor(player.UserId % 10) or espNameColor
                drawings.name.Size = espTextSize
                drawings.name.Visible = true
            else
                drawings.name.Visible = false
            end
            
            if espHealthEnabled then
                local health = math.floor(humanoid.Health)
                local maxHealth = math.floor(humanoid.MaxHealth)
                drawings.health.Text = tostring(health) .. " HP"
                drawings.health.Position = Vector2.new(boxX + width / 2, boxY + height + 2)
                drawings.health.Color = getHealthColor(health, maxHealth)
                drawings.health.Size = espTextSize - 1
                drawings.health.Visible = true
                
                local healthBarWidth = 3
                local healthBarHeight = height * (health / maxHealth)
                
                drawings.healthBarOutline.Size = Vector2.new(healthBarWidth + 2, height + 2)
                drawings.healthBarOutline.Position = Vector2.new(boxX - healthBarWidth - 3, boxY - 1)
                drawings.healthBarOutline.Visible = true
                
                drawings.healthBar.Size = Vector2.new(healthBarWidth, healthBarHeight)
                drawings.healthBar.Position = Vector2.new(boxX - healthBarWidth - 2, boxY + height - healthBarHeight)
                drawings.healthBar.Color = getHealthColor(health, maxHealth)
                drawings.healthBar.Visible = true
            else
                drawings.health.Visible = false
                drawings.healthBar.Visible = false
                drawings.healthBarOutline.Visible = false
            end
            
            if espDistanceEnabled then
                drawings.distance.Text = math.floor(distance) .. "m"
                drawings.distance.Position = Vector2.new(boxX + width / 2, boxY + height + 18)
                drawings.distance.Size = espTextSize - 2
                drawings.distance.Visible = true
            else
                drawings.distance.Visible = false
            end
            
        end)
        
        if not success then
            for _, drawing in pairs(drawings) do
                drawing.Visible = false
            end
        end
    end
end

local function startESP()
    for player, _ in pairs(espObjects) do
        removeESP(player)
    end
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            createESP(player)
        end
    end
    
    Players.PlayerAdded:Connect(function(player)
        if espEnabled and player ~= LocalPlayer then
            task.wait(0.1)
            createESP(player)
        end
    end)
    
    Players.PlayerRemoving:Connect(function(player)
        removeESP(player)
    end)
    
    if espConnection then
        espConnection:Disconnect()
    end
    
    espConnection = RunService.RenderStepped:Connect(updateESP)
end

local function stopESP()
    if espConnection then
        espConnection:Disconnect()
        espConnection = nil
    end
    
    for player, _ in pairs(espObjects) do
        removeESP(player)
    end
end

local function createFOVCircle()
    if fovCircle then
        fovCircle:Remove()
        fovCircle = nil
    end
    
    if not showFOV then return end
    
    local circle = Drawing.new("Circle")
    circle.Transparency = fovTransparency
    circle.Thickness = 2
    circle.Color = fovColor
    circle.NumSides = 64
    circle.Radius = aimbotFOV
    circle.Filled = false
    circle.Visible = aimbotEnabled and showFOV
    circle.ZIndex = 999
    
    fovCircle = circle
end

local function updateFOVCircle()
    if fovCircle then
        fovCircle.Position = UserInputService:GetMouseLocation()
        fovCircle.Radius = aimbotFOV
        fovCircle.Color = fovColor
        fovCircle.Transparency = fovTransparency
        fovCircle.Visible = aimbotEnabled and showFOV
    end
end

local function getClosestPlayerInFOV()
    local closestPlayer = nil
    local shortestDistance = aimbotFOV
    local mousePos = UserInputService:GetMouseLocation()
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local character = player.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid and humanoid.Health > 0 then
                    local targetPart = character:FindFirstChild(aimbotTargetPart)
                    if targetPart then
                        if not aimbotIgnoreDistance then
                            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                local distance = (LocalPlayer.Character.HumanoidRootPart.Position - targetPart.Position).Magnitude
                                if distance > aimbotMaxDistance then
                                    continue
                                end
                            end
                        end
                        
                        local screenPos, onScreen = Camera:WorldToViewportPoint(targetPart.Position)
                        if onScreen then
                            local distanceFromMouse = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                            
                            if distanceFromMouse < shortestDistance then
                                closestPlayer = player
                                shortestDistance = distanceFromMouse
                            end
                        end
                    end
                end
            end
        end
    end
    
    return closestPlayer
end

local function smoothAim(targetPos)
    local mousePos = UserInputService:GetMouseLocation()
    local targetScreenPos = Camera:WorldToViewportPoint(targetPos)
    local targetVector = Vector2.new(targetScreenPos.X, targetScreenPos.Y)
    
    local delta = targetVector - mousePos
    local smoothDelta = delta * aimbotSmoothing * aimbotStickiness
    
    local randomOffset = Vector2.new(
        (math.random() - 0.5) * 0.5,
        (math.random() - 0.5) * 0.5
    )
    
    local finalPos = mousePos + smoothDelta + randomOffset
    
    mousemoverel((finalPos - mousePos).X, (finalPos - mousePos).Y)
end

local function aimbotLoop()
    if not aimbotEnabled then return end
    
    local currentTime = tick()
    
    if aimbotOnCooldown then
        if currentTime - aimbotCooldownStartTime >= aimbotLockCooldown then
            aimbotOnCooldown = false
            aimbotIsLocked = false
        else
            return
        end
    end
    
    if aimbotIsLocked and (currentTime - aimbotLockStartTime >= aimbotMaxLockTime) then
        aimbotOnCooldown = true
        aimbotCooldownStartTime = currentTime
        aimbotIsLocked = false
        return
    end
    
    local mouseHeld = false
    if aimbotMouseButton == "Right" then
        mouseHeld = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2)
    elseif aimbotMouseButton == "Left" then
        mouseHeld = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton1)
    end
    
    if not mouseHeld then 
        aimbotIsLocked = false
        aimbotOnCooldown = false
        return 
    end
    
    local target = getClosestPlayerInFOV()
    if target then
        if not aimbotIsLocked then
            aimbotIsLocked = true
            aimbotLockStartTime = currentTime
        end
        
        local character = target.Character
        if character then
            local targetPart = character:FindFirstChild(aimbotTargetPart)
            if targetPart then
                smoothAim(targetPart.Position)
            end
        end
    else
        aimbotIsLocked = false
    end
end

local function startAimbot()
    if aimbotConnection then
        aimbotConnection:Disconnect()
    end
    
    createFOVCircle()
    
    aimbotConnection = RunService.RenderStepped:Connect(function()
        updateFOVCircle()
        aimbotLoop()
    end)
end

local function stopAimbot()
    if aimbotConnection then
        aimbotConnection:Disconnect()
        aimbotConnection = nil
    end
    
    if fovCircle then
        fovCircle:Remove()
        fovCircle = nil
    end
end

local function applySpeedHack()
    if speedConnection then
        speedConnection:Disconnect()
    end
    
    local character = LocalPlayer.Character
    if not character then return end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoidRootPart or not humanoid then return end
    
    speedConnection = RunService.Heartbeat:Connect(function(deltaTime)
        if speedHackEnabled and character.Parent and humanoidRootPart and humanoid then
            if humanoid.MoveDirection.Magnitude > 0 then
                local variance = 1 + getRandomSpeedVariance()
                local moveDirection = humanoid.MoveDirection
                
                local baseSpeed = 16
                local boostedSpeed = baseSpeed * speedMultiplier * variance
                local speedIncrease = (boostedSpeed - baseSpeed) * deltaTime * 1.5
                
                humanoidRootPart.CFrame = humanoidRootPart.CFrame + (moveDirection * speedIncrease)
            end
        end
    end)
end

local function disableSpeedHack()
    if speedConnection then
        speedConnection:Disconnect()
        speedConnection = nil
    end
end

local function onCharacterAdded(character)
    if speedConnection then
        speedConnection:Disconnect()
        speedConnection = nil
    end
    
    if speedHackEnabled then
        task.wait(0.5)
        applySpeedHack()
    end
end

LocalPlayer.CharacterAdded:Connect(onCharacterAdded)

if LocalPlayer.Character then
    onCharacterAdded(LocalPlayer.Character)
end

local function toggleFullbright(enabled)
    if enabled then
        if not originalLighting.brightness then
            originalLighting.brightness = Lighting.Brightness
            originalLighting.ambient = Lighting.Ambient
        end
        
        Lighting.Brightness = 2
        Lighting.Ambient = Color3.fromRGB(255, 255, 255)
        Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
    else
        if originalLighting.brightness then
            Lighting.Brightness = originalLighting.brightness
            Lighting.Ambient = originalLighting.ambient
        end
    end
end

local function toggleNoFog(enabled)
    if enabled then
        if not originalLighting.fogEnd then
            originalLighting.fogEnd = Lighting.FogEnd
            originalLighting.fogStart = Lighting.FogStart
        end

        Lighting.FogEnd = 100000
        Lighting.FogStart = 0
    else
        if originalLighting.fogEnd then
            Lighting.FogEnd = originalLighting.fogEnd
            Lighting.FogStart = originalLighting.fogStart
        end
    end
end

local function changeLightColor(enabled)
    if enabled then
        if not originalLighting.lightColor then
            originalLighting.lightColor = {
                ambient = Lighting.Ambient,
                outdoorAmbient = Lighting.OutdoorAmbient,
                colorShift_Bottom = Lighting.ColorShift_Bottom,
                colorShift_Top = Lighting.ColorShift_Top
            }
        end
        
        Lighting.Ambient = lightColor
        Lighting.OutdoorAmbient = lightColor
        Lighting.ColorShift_Bottom = lightColor
        Lighting.ColorShift_Top = lightColor
    else
        if originalLighting.lightColor then
            Lighting.Ambient = originalLighting.lightColor.ambient
            Lighting.OutdoorAmbient = originalLighting.lightColor.outdoorAmbient
            Lighting.ColorShift_Bottom = originalLighting.lightColor.colorShift_Bottom
            Lighting.ColorShift_Top = originalLighting.lightColor.colorShift_Top
        end
    end
end

local function updateLightColor()
    if lightColorEnabled then
        Lighting.Ambient = lightColor
        Lighting.OutdoorAmbient = lightColor
        Lighting.ColorShift_Bottom = lightColor
        Lighting.ColorShift_Top = lightColor
    end
end

local function sendKeyPress(key)
    VirtualInputManager:SendKeyEvent(true, key, false, game)
end

local function sendKeyRelease(key)
    VirtualInputManager:SendKeyEvent(false, key, false, game)
end

local function autoCrouchLoop()
    while isAutoCrouching do
        sendKeyPress(Enum.KeyCode.C)
        task.wait(crouchTime)
        sendKeyRelease(Enum.KeyCode.C)
        task.wait(beforeRepeatDelay)
    end
end

local function startAutoCrouch()
    if not isAutoCrouching then
        isAutoCrouching = true
        task.spawn(autoCrouchLoop)
    end
end

local function stopAutoCrouch()
    if isAutoCrouching then
        isAutoCrouching = false
        sendKeyRelease(Enum.KeyCode.C)
    end
end

local function updateKeybindCache()
    local newCache = {}
    
    if keybindListAlwaysShow or isAutoCrouching then
        newCache["AutoCrouch"] = {
            name = "Auto Crouch",
            key = Options.AutoCrouchKeybind and Options.AutoCrouchKeybind.Value or "B",
            active = isAutoCrouching
        }
    end
    
    if keybindListAlwaysShow or speedHackEnabled then
        newCache["SpeedHack"] = {
            name = "Speed Hack",
            key = Options.SpeedHackKeybind and Options.SpeedHackKeybind.Value or "V",
            active = speedHackEnabled
        }
    end
    
    if keybindListAlwaysShow or aimbotEnabled then
        newCache["Aimbot"] = {
            name = "Aimbot",
            key = Options.AimbotKeybind and Options.AimbotKeybind.Value or "X",
            active = aimbotEnabled
        }
    end
    
    if keybindListAlwaysShow or espEnabled then
        newCache["ESP"] = {
            name = "ESP",
            key = Options.ESPKeybind and Options.ESPKeybind.Value or "Z",
            active = espEnabled
        }
    end
    
    local changed = false
    for k, v in pairs(newCache) do
        if not keybindCache[k] or keybindCache[k].key ~= v.key or keybindCache[k].active ~= v.active then
            changed = true
            break
        end
    end
    
    for k in pairs(keybindCache) do
        if not newCache[k] then
            changed = true
            break
        end
    end
    
    if changed then
        keybindCache = newCache
        return true
    end
    return false
end

local function createKeybindList()
    if keybindListGui then
        keybindListGui:Destroy()
        keybindListGui = nil
    end
    
    if keybindUpdateConnection then
        keybindUpdateConnection:Disconnect()
        keybindUpdateConnection = nil
    end
    
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "KeybindList"
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    if gethui then
        screenGui.Parent = gethui()
    elseif syn and syn.protect_gui then
        syn.protect_gui(screenGui)
        screenGui.Parent = game:GetService("CoreGui")
    else
        screenGui.Parent = game:GetService("CoreGui")
    end
    
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 200, 0, 100)
    mainFrame.Position = UDim2.new(1, -220, 0.5, -50)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    mainFrame.BorderColor3 = Color3.fromRGB(60, 60, 60)
    mainFrame.BorderSizePixel = 1
    mainFrame.Parent = screenGui
    
    Library:AddToRegistry(mainFrame, {
        BackgroundColor3 = "BackgroundColor"
    })
    
    local accentLine = Instance.new("Frame")
    accentLine.Size = UDim2.new(1, 0, 0, 2)
    accentLine.Position = UDim2.new(0, 0, 0, 0)
    accentLine.BackgroundColor3 = Library.AccentColor
    accentLine.BorderSizePixel = 0
    accentLine.Parent = mainFrame
    
    Library:AddToRegistry(accentLine, {
        BackgroundColor3 = "AccentColor"
    })
    
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 22)
    titleLabel.Position = UDim2.new(0, 0, 0, 2)
    titleLabel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    titleLabel.BorderSizePixel = 0
    titleLabel.Text = "Keybinds"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Font = Enum.Font.Code
    titleLabel.TextSize = 14
    titleLabel.TextXAlignment = Enum.TextXAlignment.Center
    titleLabel.Parent = mainFrame
    
    Library:AddToRegistry(titleLabel, {
        BackgroundColor3 = "BackgroundColor",
        TextColor3 = "FontColor"
    })
    
    titleLabel.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            keybindDragging = true
            keybindDragStart = input.Position
            keybindStartPos = mainFrame.Position
        end
    end)
    
    titleLabel.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            keybindDragging = false
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if keybindDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - keybindDragStart
            mainFrame.Position = UDim2.new(
                keybindStartPos.X.Scale,
                keybindStartPos.X.Offset + delta.X,
                keybindStartPos.Y.Scale,
                keybindStartPos.Y.Offset + delta.Y
            )
        end
    end)
    
    local container = Instance.new("Frame")
    container.Name = "Container"
    container.Size = UDim2.new(1, -16, 1, -32)
    container.Position = UDim2.new(0, 8, 0, 28)
    container.BackgroundTransparency = 1
    container.Parent = mainFrame
    
    local listLayout = Instance.new("UIListLayout")
    listLayout.SortOrder = Enum.SortOrder.LayoutOrder
    listLayout.Padding = UDim.new(0, 6)
    listLayout.Parent = container
    
    keybindListGui = screenGui
    
    local function updateKeybindList()
        if not keybindListEnabled then
            screenGui.Enabled = false
            return
        end
        
        if not updateKeybindCache() then
            return
        end
        
        for _, child in pairs(container:GetChildren()) do
            if child:IsA("Frame") then
                child:Destroy()
            end
        end
        
        for _, keybind in pairs(keybindCache) do
            local keybindFrame = Instance.new("Frame")
            keybindFrame.Size = UDim2.new(1, 0, 0, 18)
            keybindFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            keybindFrame.BorderSizePixel = 0
            keybindFrame.Parent = container
            
            Library:AddToRegistry(keybindFrame, {
                BackgroundColor3 = "BackgroundColor"
            })
            
            if keybind.active then
                local activeAccent = Instance.new("Frame")
                activeAccent.Size = UDim2.new(0, 2, 1, 0)
                activeAccent.Position = UDim2.new(0, 0, 0, 0)
                activeAccent.BackgroundColor3 = Library.AccentColor
                activeAccent.BorderSizePixel = 0
                activeAccent.Parent = keybindFrame
                
                Library:AddToRegistry(activeAccent, {
                    BackgroundColor3 = "AccentColor"
                })
            end
            
            local nameLabel = Instance.new("TextLabel")
            nameLabel.Size = UDim2.new(0.55, 0, 1, 0)
            nameLabel.Position = UDim2.new(0, 6, 0, 0)
            nameLabel.BackgroundTransparency = 1
            nameLabel.Text = keybind.name
            nameLabel.TextColor3 = keybind.active and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(180, 180, 180)
            nameLabel.Font = Enum.Font.Code
            nameLabel.TextSize = 13
            nameLabel.TextXAlignment = Enum.TextXAlignment.Left
            nameLabel.Parent = keybindFrame
            
            Library:AddToRegistry(nameLabel, {
                TextColor3 = "FontColor"
            })
            
            local keyLabel = Instance.new("TextLabel")
            keyLabel.Size = UDim2.new(0.4, 0, 1, 0)
            keyLabel.Position = UDim2.new(0.55, 0, 0, 0)
            keyLabel.BackgroundTransparency = 1
            keyLabel.Text = "[" .. keybind.key .. "]"
            keyLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
            keyLabel.Font = Enum.Font.Code
            keyLabel.TextSize = 13
            keyLabel.TextXAlignment = Enum.TextXAlignment.Right
            keyLabel.Parent = keybindFrame
            
            Library:AddToRegistry(keyLabel, {
                TextColor3 = "FontColor"
            })
            
            local padding = Instance.new("UIPadding")
            padding.PaddingRight = UDim.new(0, 6)
            padding.Parent = keyLabel
        end
        
        local count = 0
        for _ in pairs(keybindCache) do count = count + 1 end
        local contentHeight = 30 + (count * 24)
        mainFrame.Size = UDim2.new(0, 200, 0, math.max(contentHeight, 50))
        
        screenGui.Enabled = true
    end
    
    keybindUpdateConnection = RunService.RenderStepped:Connect(function()
        if keybindListEnabled then
            updateKeybindList()
        end
    end)
    
    updateKeybindList()
end

local function createCrosshair()
    if crosshairGui then
        crosshairGui:Destroy()
        crosshairGui = nil
    end
    
    if spinConnection then
        spinConnection:Disconnect()
        spinConnection = nil
    end
    
    if rainbowConnection then
        rainbowConnection:Disconnect()
        rainbowConnection = nil
    end
    
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "CrosshairGui"
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    if gethui then
        screenGui.Parent = gethui()
    elseif syn and syn.protect_gui then
        syn.protect_gui(screenGui)
        screenGui.Parent = game:GetService("CoreGui")
    else
        screenGui.Parent = game:GetService("CoreGui")
    end
    
    local crosshairFrame = Instance.new("Frame")
    crosshairFrame.Name = "CrosshairFrame"
    crosshairFrame.Size = UDim2.new(0, 100, 0, 100)
    crosshairFrame.Position = UDim2.new(0.5, crosshairOffsetX, 0.5, crosshairOffsetY)
    crosshairFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    crosshairFrame.BackgroundTransparency = 1
    crosshairFrame.Parent = screenGui
    
    local function createLineWithOutline(size, position, isVertical)
        local container = Instance.new("Frame")
        container.Size = size
        container.Position = position
        container.BackgroundTransparency = 1
        container.Parent = crosshairFrame

        local outline = Instance.new("Frame")
        local outlineOffset = outlineThickness
        if isVertical then
            outline.Size = UDim2.new(1, outlineOffset * 2, 1, outlineOffset * 2)
            outline.Position = UDim2.new(0, -outlineOffset, 0, -outlineOffset)
        else
            outline.Size = UDim2.new(1, outlineOffset * 2, 1, outlineOffset * 2)
            outline.Position = UDim2.new(0, -outlineOffset, 0, -outlineOffset)
        end
        outline.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        outline.BorderSizePixel = 0
        outline.ZIndex = 1
        outline.Name = "Outline"
        outline.Parent = container
        
        local line = Instance.new("Frame")
        line.Size = UDim2.new(1, 0, 1, 0)
        line.Position = UDim2.new(0, 0, 0, 0)
        line.BackgroundColor3 = crosshairColor
        line.BorderSizePixel = 0
        line.ZIndex = 2
        line.Name = "MainLine"
        line.Parent = container
        
        return container
    end

    local halfSize = crosshairSize / 2
    local halfThickness = crosshairThickness / 2
    local halfGap = crosshairGap / 2
    
    createLineWithOutline(
        UDim2.new(0, halfSize - halfGap, 0, crosshairThickness),
        UDim2.new(0.5, -halfSize, 0.5, -halfThickness),
        false
    )
    
    createLineWithOutline(
        UDim2.new(0, halfSize - halfGap, 0, crosshairThickness),
        UDim2.new(0.5, halfGap, 0.5, -halfThickness),
        false
    )
    
    createLineWithOutline(
        UDim2.new(0, crosshairThickness, 0, halfSize - halfGap),
        UDim2.new(0.5, -halfThickness, 0.5, -halfSize),
        true
    )
    
    createLineWithOutline(
        UDim2.new(0, crosshairThickness, 0, halfSize - halfGap),
        UDim2.new(0.5, -halfThickness, 0.5, halfGap),
        true
    )
    
    if centerDotEnabled then
        local dotSize = 4
        local dotContainer = Instance.new("Frame")
        dotContainer.Size = UDim2.new(0, dotSize + (outlineThickness * 2), 0, dotSize + (outlineThickness * 2))
        dotContainer.Position = UDim2.new(0.5, -(dotSize + (outlineThickness * 2))/2, 0.5, -(dotSize + (outlineThickness * 2))/2)
        dotContainer.BackgroundTransparency = 1
        dotContainer.Parent = crosshairFrame
        
        local dotOutline = Instance.new("Frame")
        dotOutline.Size = UDim2.new(0, dotSize + (outlineThickness * 2), 0, dotSize + (outlineThickness * 2))
        dotOutline.Position = UDim2.new(0, 0, 0, 0)
        dotOutline.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        dotOutline.BorderSizePixel = 0
        dotOutline.ZIndex = 1
        dotOutline.Name = "DotOutline"
        dotOutline.Parent = dotContainer
        
        local outlineCorner = Instance.new("UICorner")
        outlineCorner.CornerRadius = UDim.new(1, 0)
        outlineCorner.Parent = dotOutline
        
        local centerDot = Instance.new("Frame")
        centerDot.Size = UDim2.new(0, dotSize, 0, dotSize)
        centerDot.Position = UDim2.new(0, outlineThickness, 0, outlineThickness)
        centerDot.BackgroundColor3 = crosshairColor
        centerDot.BorderSizePixel = 0
        centerDot.ZIndex = 2
        centerDot.Name = "CenterDot"
        centerDot.Parent = dotContainer
        
        local centerCorner = Instance.new("UICorner")
        centerCorner.CornerRadius = UDim.new(1, 0)
        centerCorner.Parent = centerDot
    end
    
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(0, 200, 0, 20)
    textLabel.Position = UDim2.new(0.5, 0, 0.5, textOffsetY)
    textLabel.AnchorPoint = Vector2.new(0.5, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = crosshairText
    textLabel.TextColor3 = crosshairColor
    textLabel.TextStrokeTransparency = 0
    textLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    textLabel.Font = Enum.Font.Code
    textLabel.TextSize = 14
    textLabel.Name = "CrosshairTextLabel"
    textLabel.Parent = screenGui
    
    crosshairGui = screenGui
    
    local rotation = 0
    spinConnection = RunService.RenderStepped:Connect(function(dt)
        if crosshairEnabled then
            rotation = rotation + (crosshairSpinSpeed * dt * 60)
            crosshairFrame.Rotation = rotation
        end
    end)
    
    if rainbowMode then
        rainbowConnection = RunService.RenderStepped:Connect(function()
            if crosshairEnabled and rainbowMode then
                local rainbowColor = getRainbowColor()
                
                local frame = crosshairGui:FindFirstChild("CrosshairFrame")
                if frame then
                    for _, child in pairs(frame:GetDescendants()) do
                        if child.Name == "MainLine" or child.Name == "CenterDot" then
                            child.BackgroundColor3 = rainbowColor
                        end
                    end
                end
                
                local textLabel = crosshairGui:FindFirstChild("CrosshairTextLabel")
                if textLabel then
                    textLabel.TextColor3 = rainbowColor
                end
            end
        end)
    end
end

local function updateCrosshairColor()
    if crosshairGui and not rainbowMode then
        local frame = crosshairGui:FindFirstChild("CrosshairFrame")
        if frame then
            for _, child in pairs(frame:GetDescendants()) do
                if child.Name == "MainLine" or child.Name == "CenterDot" then
                    child.BackgroundColor3 = crosshairColor
                end
            end
        end
        
        local textLabel = crosshairGui:FindFirstChild("CrosshairTextLabel")
        if textLabel then
            textLabel.TextColor3 = crosshairColor
        end
    end
end

local function updateTextOffset()
    if crosshairGui then
        local textLabel = crosshairGui:FindFirstChild("CrosshairTextLabel")
        if textLabel then
            textLabel.Position = UDim2.new(0.5, 0, 0.5, textOffsetY)
        end
    end
end

local function updateCrosshairPosition()
    if crosshairGui then
        local frame = crosshairGui:FindFirstChild("CrosshairFrame")
        if frame then
            frame.Position = UDim2.new(0.5, crosshairOffsetX, 0.5, crosshairOffsetY)
        end
    end
end

local ESPGroup = Tabs.Visuals:AddLeftGroupbox('Player ESP')

ESPGroup:AddLabel('Keybind'):AddKeyPicker('ESPKeybind', {
    Default = 'Z',
    SyncToggleState = false,
    Mode = 'Toggle',
    Text = 'ESP Toggle',
    Callback = function(Value)
        espEnabled = Value
        if Value then
            startESP()
        else
            stopESP()
        end
    end
})

ESPGroup:AddDivider()
ESPGroup:AddLabel('ESP')

ESPGroup:AddToggle('ESPBox', {
    Text = 'Show Box',
    Default = true,
    Callback = function(Value)
        espBoxEnabled = Value
    end
})

ESPGroup:AddToggle('ESPName', {
    Text = 'Show Name',
    Default = true,
    Callback = function(Value)
        espNameEnabled = Value
    end
})

ESPGroup:AddToggle('ESPHealth', {
    Text = 'Show Health',
    Default = true,
    Callback = function(Value)
        espHealthEnabled = Value
    end
})

ESPGroup:AddToggle('ESPDistance', {
    Text = 'Show Distance',
    Default = true,
    Callback = function(Value)
        espDistanceEnabled = Value
    end
})

ESPGroup:AddDivider()
ESPGroup:AddLabel('Box Settings')

ESPGroup:AddToggle('ESPFillBox', {
    Text = 'Fill Box',
    Default = false,
    Callback = function(Value)
        espFillBox = Value
    end
})

ESPGroup:AddSlider('ESPFillTransparency', {
    Text = 'Fill Transparency',
    Default = 0.1,
    Min = 0,
    Max = 1,
    Rounding = 2,
    Compact = false,
    Callback = function(Value)
        espFillTransparency = Value
    end
})

ESPGroup:AddSlider('ESPBoxThickness', {
    Text = 'Box Thickness',
    Default = 1,
    Min = 1,
    Max = 5,
    Rounding = 0,
    Compact = false,
    Callback = function(Value)
        espBoxThickness = Value
    end
})

ESPGroup:AddDivider()
ESPGroup:AddLabel('Color Settings')

ESPGroup:AddToggle('ESPRainbow', {
    Text = 'Rainbow ESP',
    Default = false,
    Callback = function(Value)
        espRainbow = Value
    end
})


ESPGroup:AddLabel('Box Color'):AddColorPicker('ESPBoxColor', {
    Default = Color3.fromRGB(255, 255, 255),
    Title = 'Box Color',
    Transparency = 0,
    Callback = function(Value)
        espBoxColor = Value
    end
})

ESPGroup:AddLabel('Name Color'):AddColorPicker('ESPNameColor', {
    Default = Color3.fromRGB(255, 255, 255),
    Title = 'Name Color',
    Transparency = 0,
    Callback = function(Value)
        espNameColor = Value
    end
})

ESPGroup:AddDivider()
ESPGroup:AddLabel('Other Settings')

ESPGroup:AddSlider('ESPTextSize', {
    Text = 'Text Size',
    Default = 13,
    Min = 10,
    Max = 20,
    Rounding = 0,
    Compact = false,
    Callback = function(Value)
        espTextSize = Value
    end
})

ESPGroup:AddSlider('ESPMaxDistance', {
    Text = 'Max Distance',
    Default = 1000,
    Min = 100,
    Max = 5000,
    Rounding = 0,
    Compact = false,
    Suffix = ' studs',
    Callback = function(Value)
        espMaxDistance = Value
    end
})

ESPGroup:AddSlider('ESPUpdateRate', {
    Text = 'Update Rate',
    Default = 0.001,
    Min = 0.001,
    Max = 0.1,
    Rounding = 3,
    Compact = false,
    Suffix = 's',
    Tooltip = 'Lower = smoother (uses more CPU)',
    Callback = function(Value)
        espUpdateRate = Value
    end
})

local AimbotGroup = Tabs.Combat:AddLeftGroupbox('Aimbot')

AimbotGroup:AddLabel('Keybind'):AddKeyPicker('AimbotKeybind', {
    Default = 'X',
    SyncToggleState = false,
    Mode = 'Toggle',
    Text = 'Aimbot',
    Callback = function(Value)
        aimbotEnabled = Value
        if Value then
            startAimbot()
        else
            stopAimbot()
        end
    end
})

AimbotGroup:AddDivider()
AimbotGroup:AddDropdown('AimbotMouseButton', {
    Values = {'Right', 'Left'},
    Default = 1,
    Multi = false,
    Text = 'Activation Button',
    Callback = function(Value)
        aimbotMouseButton = Value
    end
})

AimbotGroup:AddDropdown('TargetPart', {
    Values = {'Head', 'HumanoidRootPart'},
    Default = 1,
    Multi = false,
    Text = 'Target Part',
    Callback = function(Value)
        aimbotTargetPart = Value
    end
})

AimbotGroup:AddSlider('AimbotFOV', {
    Text = 'FOV Size',
    Default = 150,
    Min = 50,
    Max = 500,
    Rounding = 0,
    Compact = false,
    Callback = function(Value)
        aimbotFOV = Value
        if fovCircle then
            fovCircle.Radius = Value
        end
    end
})

AimbotGroup:AddSlider('AimbotSmoothing', {
    Text = 'Smoothing',
    Default = 0.15,
    Min = 0.05,
    Max = 1,
    Rounding = 2,
    Compact = false,
    Callback = function(Value)
        aimbotSmoothing = Value
    end
})

AimbotGroup:AddSlider('AimbotStickiness', {
    Text = 'Stickiness',
    Default = 0.8,
    Min = 0.1,
    Max = 1,
    Rounding = 2,
    Compact = false,
    Callback = function(Value)
        aimbotStickiness = Value
    end
})

AimbotGroup:AddDivider()
AimbotGroup:AddLabel('Lock-On Timing')

AimbotGroup:AddSlider('MaxLockTime', {
    Text = 'Max Lock Time',
    Default = 2.0,
    Min = 0.5,
    Max = 10,
    Rounding = 1,
    Compact = false,
    Suffix = 's',
    Tooltip = 'Maximum time to lock onto target',
    Callback = function(Value)
        aimbotMaxLockTime = Value
    end
})

AimbotGroup:AddSlider('LockCooldown', {
    Text = 'Lock Cooldown',
    Default = 1.0,
    Min = 0.1,
    Max = 5,
    Rounding = 1,
    Compact = false,
    Suffix = 's',
    Tooltip = 'Delay before locking on again',
    Callback = function(Value)
        aimbotLockCooldown = Value
    end
})

AimbotGroup:AddDivider()
AimbotGroup:AddToggle('IgnoreDistance', {
    Text = 'Ignore Distance',
    Default = false,
    Callback = function(Value)
        aimbotIgnoreDistance = Value
    end

})

AimbotGroup:AddSlider('MaxDistance', {
    Text = 'Max Distance',
    Default = 500,
    Min = 100,
    Max = 2000,
    Rounding = 0,
    Compact = false,
    Suffix = ' studs',
    Callback = function(Value)
        aimbotMaxDistance = Value
    end
})

AimbotGroup:AddDivider()
AimbotGroup:AddLabel('FOV Circle')

AimbotGroup:AddToggle('ShowFOV', {
    Text = 'Show FOV Circle',
    Default = true,
    Callback = function(Value)
        showFOV = Value
        if aimbotEnabled then
            if Value then
                createFOVCircle()
            elseif fovCircle then
                fovCircle:Remove()
                fovCircle = nil
            end
        end
    end
})

AimbotGroup:AddLabel('FOV Color'):AddColorPicker('FOVColor', {
    Default = Color3.fromRGB(255, 255, 255),
    Title = 'FOV Circle Color',
    Transparency = 0.5,
    Callback = function(Value)
        fovColor = Value
        if fovCircle then
            fovCircle.Color = Value
        end
    end
})

AimbotGroup:AddSlider('FOVTransparency', {
    Text = 'FOV Transparency',
    Default = 0.5,
    Min = 0,
    Max = 1,
    Rounding = 2,
    Compact = false,
    Callback = function(Value)
        fovTransparency = Value
        if fovCircle then
            fovCircle.Transparency = Value
        end
    end
})

VisualsGroup:AddToggle('CrosshairToggle', {
    Text = 'Enable Crosshair',
    Default = false,
    Callback = function(Value)
        crosshairEnabled = Value
        
        if Value then
            createCrosshair()
        else
            if crosshairGui then
                crosshairGui:Destroy()
                crosshairGui = nil
            end
            if spinConnection then
                spinConnection:Disconnect()
                spinConnection = nil
            end
            if rainbowConnection then
                rainbowConnection:Disconnect()
                rainbowConnection = nil
            end
        end
    end
})

VisualsGroup:AddDivider()
VisualsGroup:AddLabel('Color & Style')

VisualsGroup:AddToggle('RainbowMode', {
    Text = 'Rainbow Mode',
    Default = false,
    Callback = function(Value)
        rainbowMode = Value
        
        if Value then
            if crosshairEnabled then
                createCrosshair()
            end
        else
            if rainbowConnection then
                rainbowConnection:Disconnect()
                rainbowConnection = nil
            end
            updateCrosshairColor()
        end
    end
})

VisualsGroup:AddSlider('RainbowSpeed', {
    Text = 'Rainbow Speed',
    Default = 2.2,
    Min = 0.1,
    Max = 5,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        rainbowSpeed = Value
    end
})

VisualsGroup:AddLabel('Crosshair Color'):AddColorPicker('CrosshairColor', {
    Default = Color3.fromRGB(255, 255, 255),
    Title = 'Crosshair Color',
    Transparency = 0,
    Callback = function(Value)
        crosshairColor = Value
        if not rainbowMode then
            updateCrosshairColor()
        end
    end
})

VisualsGroup:AddSlider('CrosshairSpeed', {
    Text = 'Spin Speed',
    Default = 3.5,
    Min = 0,
    Max = 20,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        crosshairSpinSpeed = Value
    end
})

VisualsGroup:AddDivider()
VisualsGroup:AddLabel('Crosshair Settings')

VisualsGroup:AddSlider('CrosshairSize', {
    Text = 'Crosshair Size',
    Default = 27.8,
    Min = 10,
    Max = 100,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        crosshairSize = Value
        if crosshairEnabled then
            createCrosshair()
        end
    end
})

VisualsGroup:AddSlider('CrosshairThickness', {
    Text = 'Line Thickness',
    Default = 2.3,
    Min = 1,
    Max = 10,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        crosshairThickness = Value
        if crosshairEnabled then
            createCrosshair()
        end
    end
})

VisualsGroup:AddSlider('OutlineThickness', {
    Text = 'Outline Thickness',
    Default = 2,
    Min = 1,
    Max = 6,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        outlineThickness = Value
        if crosshairEnabled then
            createCrosshair()
        end
    end
})

VisualsGroup:AddSlider('CrosshairGap', {
    Text = 'Bar Spacing (Gap)',
    Default = 8.9,
    Min = 0,
    Max = 30,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        crosshairGap = Value
        if crosshairEnabled then
            createCrosshair()
        end
    end
})

VisualsGroup:AddToggle('CenterDotToggle', {
    Text = 'Show Center Dot',
    Default = true,
    Callback = function(Value)
        centerDotEnabled = Value
        if crosshairEnabled then
            createCrosshair()
        end
    end
})

VisualsGroup:AddDivider()
VisualsGroup:AddLabel('Text Settings')

VisualsGroup:AddInput('CrosshairText', {
    Default = 'Reden.Hook',
    Numeric = false,
    Finished = false,
    Text = 'Crosshair Text',
    Placeholder = 'Enter text...',
    Callback = function(Value)
        crosshairText = Value
        
        if crosshairGui then
            local textLabel = crosshairGui:FindFirstChild("CrosshairTextLabel")
            if textLabel then
                textLabel.Text = Value
            end
        end
    end
})

VisualsGroup:AddSlider('TextOffset', {
    Text = 'Name Offset (Y)',
    Default = 20,
    Min = 5,
    Max = 200,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        textOffsetY = Value
        updateTextOffset()
    end
})

VisualsGroup:AddDivider()
VisualsGroup:AddLabel('Position Adjustment')

VisualsGroup:AddSlider('CrosshairOffsetX', {
    Text = 'Crosshair X Position',
    Default = 0,
    Min = -100,
    Max = 100,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        crosshairOffsetX = Value
        updateCrosshairPosition()
    end
})

VisualsGroup:AddSlider('CrosshairOffsetY', {
    Text = 'Crosshair Y Position',
    Default = -29.3,
    Min = -100,
    Max = 100,
    Rounding = 1,
    Compact = false,
    Callback = function(Value)
        crosshairOffsetY = Value
        updateCrosshairPosition()
    end
})

local EnhancementsGroup = Tabs.Misc:AddRightGroupbox('Visual Enhancements')

EnhancementsGroup:AddToggle('FullbrightToggle', {
    Text = 'Fullbright',
    Default = false,
    Callback = function(Value)
        fullbrightEnabled = Value
        toggleFullbright(Value)
    end
})

EnhancementsGroup:AddToggle('NoFogToggle', {
    Text = 'No Fog',
    Default = false,
    Callback = function(Value)
        toggleNoFog(Value)
    end
})

EnhancementsGroup:AddDivider()
EnhancementsGroup:AddLabel('Light Customization')

EnhancementsGroup:AddToggle('LightColorToggle', {
    Text = 'Custom Light Color',
    Default = false,
    Callback = function(Value)
        lightColorEnabled = Value
        changeLightColor(Value)
    end
})

EnhancementsGroup:AddLabel('Light Color'):AddColorPicker('LightColorPicker', {
    Default = Color3.fromRGB(0, 0, 0),
    Title = 'Light Color',
    Transparency = 0,
    Callback = function(Value)
        lightColor = Value
        updateLightColor()
    end
})
local SkinchangerGroup = Tabs.Misc:AddLeftGroupbox('Skinchanger')

local skinchangerEnabled = false
local skinchangerLoaded = false

SkinchangerGroup:AddToggle('SkinchangerToggle', {
    Text = 'Enable Skinchanger',
    Default = false,
    Callback = function(Value)
        skinchangerEnabled = Value
        
        if Value and not skinchangerLoaded then
            pcall(function()
.local SkinchangerGroup = Tabs.Misc:AddLeftGroupbox('Skinchanger')

local skinchangerEnabled = false
local skinchangerLoaded = false

SkinchangerGroup:AddToggle('SkinchangerToggle', {
    Text = 'Enable Skinchanger',
    Default = false,
    Callback = function(Value)
        skinchangerEnabled = Value
        
        if Value and not skinchangerLoaded then
            pcall(function()
                local v0 = string.char
local v1 = string.byte
local v2 = string.sub
local v3 = bit32 or bit
local v4 = v3.bxor
local v5 = table.concat
local v6 = table.insert
local function v7(v47, v48)
    local v49 = {}
    for v96 = 1, #v47 do
        v6(v49, v0(v4(v1(v2(v47, v96, v96 + 1)), v1(v2(v48, 1 + (v96 % #v48), 1 + (v96 % #v48) + 1))) % 256))
    end
    return v5(v49)
end
if not game:IsLoaded() then
    game.Loaded:Wait()
end
task.wait(14 - 9)
local v8 = game:GetService(v7("\225\207\218\60\227\169\212", "\126\177\163\187\69\134\219\167"))
local v9 = game:GetService(v7("\17\200\58\201\245\32\204\62\192\248\16\217\37\215\253\36\200", "\156\67\173\74\165"))
local v10 = game:GetService(v7("\28\163\93\6\143\35\84\34\190\74\19", "\38\84\215\41\118\220\70"))
local v11 = v8.LocalPlayer
local function v12()
    if not v11.Character then
        v11.CharacterAdded:Wait()
    end
    task.wait(339 - (10 + 327))
end
v12()
local v13
local v14 = 0 - 0
repeat
    local v50 = 0 + 0
    local v51
    while true do
        if (v50 == (338 - (118 + 220))) then
            v51 = 1329 - (797 + 532)
            while true do
                if (v51 == (0 + 0)) then
                    task.wait(1 + 0)
                    v13 = v11:FindFirstChild(v7("\96\26\35\11\251\66\37\33\0\247\64\2\49", "\158\48\118\66\114"))
                    v51 = 2 - 1
                end
                if (v51 == (1203 - (373 + 829))) then
                    v14 = v14 + (732 - (476 + 255))
                    if (v14 > (84 - 64)) then
                        return
                    end
                    break
                end
            end
            break
        end
    end
until v13
local v15
v14 = 1130 - (369 + 761)
repeat
    task.wait(1494 - (711 + 782))
    v15 = v13:FindFirstChild(v7("\136\43\30\34\97\170\247\167\33\2\37", "\155\203\68\112\86\19\197"))
    v14 = v14 + 1 + 0
    if (v14 > (36 - 16)) then
        return
    end
until v15
local v16
v14 = 0
repeat
    local v52 = 469 - (270 + 199)
    while true do
        if (v52 == (0 - 0)) then
            task.wait(239 - (64 + 174))
            v16 = v9:FindFirstChild(v7("\107\210\50\233\76\125\246", "\152\38\189\86\156\32\24\133"))
            v52 = 1 + 0
        end
        if (v52 == (1 + 0)) then
            v14 = v14 + (1 - 0)
            if (v14 > (20 + 0)) then
                return
            end
            break
        end
    end
until v16
local function v17(v53, v54, v55)
    local v56 = 0
    local v57
    while true do
        if (v56 == (337 - (144 + 192))) then
            return v53:FindFirstChild(v54)
        end
        if (v56 == 0) then
            local v108 = 216 - (42 + 174)
            while true do
                if (v108 == (0 + 0)) then
                    v57 = 0 + 0
                    while not v53:FindFirstChild(v54) and (v57 < v55) do
                        local v149 = 0 + 0
                        while true do
                            if (v149 == (1167 - (645 + 522))) then
                                task.wait(0.5 + 0)
                                v57 = v57 + (1504.5 - (363 + 1141))
                                break
                            end
                        end
                    end
                    v108 = 1581 - (1183 + 397)
                end
                if (v108 == (2 - 1)) then
                    v56 = 1837 - (1045 + 791)
                    break
                end
            end
        end
    end
end
local v18 = v17(v16, v7("\223\88\180\75\249\67\174\69\208\94\165\84\253\69\190", "\38\156\55\199"), 25 - 15)
local v19 = v17(v16, v7("\129\105\121\37\63\125\248\81\169\111\101", "\35\200\29\28\72\115\20\154"), 15 - 5)
local v20 =
    v17(
    v15,
    v7("\41\179\208\198\136\62\16\24\171\208\252\130\34\32\11\176\221\211\136\62", "\84\121\223\177\191\237\76"),
    515 - (351 + 154)
)
if (not v18 or not v19 or not v20) then
    return
end
local v21, v22, v23, v24
local v25 =
    pcall(
    function()
        local v58 = 0 + 0
        local v59
        while true do
            if (v58 == (1 + 0)) then
                v24 = require(v20)
                v59 = v16:FindFirstChild(v7("\158\88\220\173\22\89\50\211\186\68\208", "\161\219\54\169\192\90\48\80"))
                v58 = 1977 - (1913 + 62)
            end
            if (v58 == (0 - 0)) then
                v22 = require(v18)
                v23 = require(v19)
                v58 = 1 + 0
            end
            if (v58 == (2 + 0)) then
                if v59 then
                    v21 = require(v59)
                    if (v21 and v21.WaitForEnumBuilder) then
                        task.spawn(
                            function()
                                pcall(
                                    function()
                                        v21:WaitForEnumBuilder()
                                    end
                                )
                            end
                        )
                    end
                end
                break
            end
        end
    end
)
if (not v25 or not v22 or not v23 or not v24) then
    return
end
local v26 = {}
local v27 = {}
local v28, v29, v30
local function v31(v60, v61, v62)
    local v63 = 0 - 0
    local v64
    local v65
    local v66
    while true do
        if (v63 == (1933 - (565 + 1368))) then
            v64 = 0 - 0
            v65 = nil
            v63 = 1662 - (1477 + 184)
        end
        if (v63 == (1 - 0)) then
            v66 = nil
            while true do
                local v117 = 0
                while true do
                    if (v117 == (470 - (381 + 89))) then
                        if (v64 == (0 + 0)) then
                            if (not v22 or not v22.Cosmetics) then
                                return nil
                            end
                            v65 = v22.Cosmetics[v60]
                            if not v65 then
                                return nil
                            end
                            v64 = 1
                        end
                        if ((858 - (564 + 292)) == v64) then
                            v66.Type = v66.Type or v61
                            v66.Seed = math.random(1 - 0, 3014168 - 2014168)
                            if v21 then
                                pcall(
                                    function()
                                        local v208 = v21:ToEnum(v60)
                                        if v208 then
                                            v66.Enum, v66.ObjectID = v208, v208
                                        end
                                    end
                                )
                            end
                            v64 = 307 - (244 + 60)
                        end
                        v117 = 1 + 0
                    end
                    if (v117 == (477 - (41 + 435))) then
                        if (v64 == (1002 - (938 + 63))) then
                            v66 = {}
                            for v187, v188 in pairs(v65) do
                                v66[v187] = v188
                            end
                            v66.Name = v60
                            v64 = 2 + 0
                        end
                        if (v64 == (1128 - (936 + 189))) then
                            local v173 = 0
                            while true do
                                if (v173 == (0 + 0)) then
                                    if v62 then
                                        local v228 = 0 + 0
                                        local v229
                                        while true do
                                            if (v228 == 0) then
                                                v229 = 1613 - (1565 + 48)
                                                while true do
                                                    if ((0 - 0) == v229) then
                                                        if v62.inverted then
                                                            v66.Inverted = true
                                                        end
                                                        if v62.favoritesOnly then
                                                            v66.OnlyUseFavorites = true
                                                        end
                                                        break
                                                    end
                                                end
                                                break
                                            end
                                        end
                                    end
                                    return v66
                                end
                            end
                        end
                        break
                    end
                end
            end
            break
        end
    end
end
local v32 = v7("\92\76\12\42\74\73\1\41\69\13\3\42\71\68\9\34\7\72\19\42\71", "\69\41\34\96")
local function v33()
    if not writefile then
        return
    end
    task.spawn(
        function()
            pcall(
                function()
                    local v106 = 0 + 0
                    local v107
                    while true do
                        if (v106 == (626 - (512 + 114))) then
                            local v129 = 1138 - (782 + 356)
                            while true do
                                if (v129 == (268 - (176 + 91))) then
                                    v106 = 1
                                    break
                                end
                                if (v129 == (0 - 0)) then
                                    v107 = {
                                        [v7("\185\210\194\3\18\59\185\199", "\75\220\163\183\106\98")] = {},
                                        [v7("\4\187\157\56\203\11\174\142\36", "\185\98\218\235\87")] = v27
                                    }
                                    for v174, v175 in pairs(v26) do
                                        local v176 = 0 - 0
                                        while true do
                                            if (v176 == (1092 - (975 + 117))) then
                                                v107.equipped[v174] = {}
                                                for v211, v212 in pairs(v175) do
                                                    if (v212 and v212.Name) then
                                                        v107.equipped[v174][v211] = {
                                                            [v7("\197\61\42\227", "\202\171\92\71\134\190")] = v212.Name,
                                                            [v7("\58\196\41\140", "\232\73\161\76")] = v212.Seed,
                                                            [v7("\178\215\84\88\12\175\220\70", "\126\219\185\34\61")] = v212.Inverted
                                                        }
                                                    end
                                                end
                                                break
                                            end
                                        end
                                    end
                                    v129 = 1876 - (157 + 1718)
                                end
                            end
                        end
                        if (v106 == (1 + 0)) then
                            if not isfolder(v7("\25\192\82\125\125\124\242\235\0", "\135\108\174\62\18\30\23\147")) then
                                makefolder(v7("\163\231\38\196\27\165\50\203\186", "\167\214\137\74\171\120\206\83"))
                            end
                            writefile(v32, v10:JSONEncode(v107))
                            break
                        end
                    end
                end
            )
        end
    )
end
local function v34()
    if (not readfile or not isfile or not isfile(v32)) then
        return
    end
    pcall(
        function()
            local v97 = 0 - 0
            local v98
            while true do
                if (v97 == (3 - 2)) then
                    v27 = v98.favorites or {}
                    break
                end
                if (v97 == (1469 - (1269 + 200))) then
                    v98 = v10:JSONDecode(readfile(v32))
                    if v98.equipped then
                        for v150, v151 in pairs(v98.equipped) do
                            local v152 = 1018 - (697 + 321)
                            while true do
                                if ((0 - 0) == v152) then
                                    v26[v150] = {}
                                    for v201, v202 in pairs(v151) do
                                        local v203 = 0 - 0
                                        local v204
                                        while true do
                                            if (v203 == (0 - 0)) then
                                                v204 =
                                                    v31(
                                                    v202.name,
                                                    v201,
                                                    {
                                                        [v7("\130\254\36\88\234\179\142\244", "\199\235\144\82\61\152")] = v202.inverted
                                                    }
                                                )
                                                if v204 then
                                                    local v247 = 0 + 0
                                                    while true do
                                                        if (v247 == (0 - 0)) then
                                                            v204.Seed = v202.seed
                                                            v26[v150][v201] = v204
                                                            break
                                                        end
                                                    end
                                                end
                                                break
                                            end
                                        end
                                    end
                                    break
                                end
                            end
                        end
                    end
                    v97 = 2 - 1
                end
            end
        end
    )
end
v22.OwnsCosmeticNormally = function()
    return true
end
v22.OwnsCosmeticUniversally = function()
    return true
end
v22.OwnsCosmeticForWeapon = function()
    return true
end
local v38 = v22.OwnsCosmetic
v22.OwnsCosmetic = function(v67, v68, v69, v70)
    if (v69 and v69:find(v7("\42\63\138\24\46\56\158\20", "\75\103\118\217"))) then
        return v38(v67, v68, v69, v70)
    end
    return true
end
local v40 = v24.Get
v24.Get = function(v71, v72)
    local v73 = 0 + 0
    local v74
    while true do
        if (v73 == 1) then
            if (v72 == v7("\33\239\179\193\21\231\177\203\3\205\170\221\10\235\177\199\4\253", "\174\103\142\197")) then
                local v130 = 1227 - (322 + 905)
                local v131
                while true do
                    if ((611 - (602 + 9)) == v130) then
                        local v162 = 0
                        while true do
                            if (v162 == (1190 - (449 + 740))) then
                                v130 = 3 - 2
                                break
                            end
                            if (v162 == (0 + 0)) then
                                v131 = {}
                                if v74 then
                                    for v230, v231 in pairs(v74) do
                                        v131[v230] = v231
                                    end
                                end
                                v162 = 1 + 0
                            end
                        end
                    end
                    if (v130 == (873 - (826 + 46))) then
                        for v177, v178 in pairs(v27) do
                            local v179 = 0 + 0
                            while true do
                                if (v179 == (947 - (245 + 702))) then
                                    v131[v177] = v131[v177] or {}
                                    for v213, v214 in pairs(v178) do
                                        v131[v177][v213] = v214
                                    end
                                    break
                                end
                            end
                        end
                        return v131
                    end
                end
            end
            return v74
        end
        if (v73 == (0 - 0)) then
            v74 = v40(v71, v72)
            if (v72 == v7("\228\91\99\25\188\10\206\87\89\26\175\27\201\64\127\6\160", "\126\167\52\16\116\217")) then
                return setmetatable(
                    {},
                    {[v7("\247\17\41\142\176\28\228", "\156\168\78\64\224\212\121")] = function()
                            return true
                        end}
                )
            end
            v73 = 1 + 0
        end
    end
end
local v42 = v24.GetWeaponData
v24.GetWeaponData = function(v75, v76)
    local v77 = 1898 - (260 + 1638)
    local v78
    while true do
        if (v77 == (441 - (382 + 58))) then
            if v26[v76] then
                for v136, v137 in pairs(v26[v76]) do
                    v78[v136] = v137
                end
            end
            return v78
        end
        if (v77 == (0 - 0)) then
            v78 = v42(v75, v76)
            if not v78 then
                return nil
            end
            v77 = 1620 - (1427 + 192)
        end
    end
end
local v44
task.spawn(
    function()
        local v79 = 0 + 0
        local v80
        while true do
            if ((0 - 0) == v79) then
                v80 =
                    v15:FindFirstChild(
                    v7("\112\33\88\48\49\91\234\117\39\81\44\55\81\244\90\45\77", "\152\54\72\63\88\69\62")
                )
                if v80 then
                    pcall(
                        function()
                            v44 = require(v80)
                        end
                    )
                end
                break
            end
        end
    end
)
task.spawn(
    function()
        local v81 = 0 + 0
        local v82
        local v83
        local v84
        local v85
        local v86
        local v87
        local v88
        local v89
        while true do
            if (v81 == (1 + 0)) then
                local v109 = 0 - 0
                local v110
                while true do
                    if (v109 == (326 - (192 + 134))) then
                        v110 = 1276 - (316 + 960)
                        while true do
                            if (v110 == (0 - 0)) then
                                v83 = v82:FindFirstChild(v7("\124\95\17\40", "\114\56\62\101\73\71\141"))
                                v84 =
                                    v82:FindFirstChild(
                                    v7("\138\236\203\200\177\234\218\208\177\230\213", "\164\216\137\187")
                                )
                                v110 = 1 + 0
                            end
                            if (v110 == (2 + 0)) then
                                v81 = 1207 - (902 + 303)
                                break
                            end
                            if (v110 == (1 - 0)) then
                                v85 =
                                    v83 and
                                    v83:FindFirstChild(
                                        v7(
                                            "\247\247\36\187\182\221\4\193\235\52\166\175\253",
                                            "\107\178\134\81\210\198\158"
                                        )
                                    )
                                v86 =
                                    v83 and
                                    v83:FindFirstChild(
                                        v7(
                                            "\30\15\148\201\184\49\26\135\229\165\43\3\135\210\163\59",
                                            "\202\88\110\226\166"
                                        )
                                    )
                                v110 = 553 - (83 + 468)
                            end
                        end
                        break
                    end
                end
            end
            if ((6 - 3) == v81) then
                v89 =
                    hookmetamethod(
                    game,
                    v7("\190\19\195\19\234\132\47\204\30\235", "\135\225\76\173\114"),
                    function(v118, ...)
                        if
                            (getnamecallmethod() ~=
                                v7("\60\228\170\181\159\184\181\12\232\170", "\199\122\141\216\208\204\221"))
                         then
                            return v89(v118, ...)
                        end
                        local v119 = {...}
                        if (v88 and (v118 == v88) and v44) then
                            task.spawn(
                                function()
                                    pcall(
                                        function()
                                            local v163 = v44:GetFighter(v11)
                                            if (v163 and v163.Items) then
                                                for v205, v206 in pairs(v163.Items) do
                                                    if
                                                        (v206:Get(
                                                            v7(
                                                                "\130\223\26\245\123\226\132\249",
                                                                "\150\205\189\112\144\24"
                                                            )
                                                        ) == v119[4 - 3])
                                                     then
                                                        v30 = v206.Name
                                                        break
                                                    end
                                                end
                                            end
                                        end
                                    )
                                end
                            )
                        end
                        if (v118 == v85) then
                            local v139, v140, v141 = v119[1691 - (1121 + 569)], v119[2 - 0], v119[217 - (22 + 192)]
                            local v142 = v119[329 - (45 + 280)] or {}
                            v26[v139] = v26[v139] or {}
                            if
                                (not v141 or (v141 == v7("\11\139\177\73", "\112\69\228\223\44\100\232\113")) or
                                    (v141 == ""))
                             then
                                local v164 = 683 - (483 + 200)
                                while true do
                                    if ((0 + 0) == v164) then
                                        v26[v139][v140] = nil
                                        if not next(v26[v139]) then
                                            v26[v139] = nil
                                        end
                                        break
                                    end
                                end
                            else
                                local v165 = 1463 - (1404 + 59)
                                local v166
                                while true do
                                    if (v165 == (0 - 0)) then
                                        v166 =
                                            v31(
                                            v141,
                                            v140,
                                            {
                                                [v7("\221\17\17\214\164\104\131\208", "\230\180\127\103\179\214\28")] = v142.IsInverted,
                                                [v7(
                                                    "\138\4\73\73\246\72\244\137\22\112\72\232\88",
                                                    "\128\236\101\63\38\132\33"
                                                )] = v142.OnlyUseFavorites
                                            }
                                        )
                                        if v166 then
                                            v26[v139][v140] = v166
                                        end
                                        break
                                    end
                                end
                            end
                            task.spawn(
                                function()
                                    local v153 = 0 - 0
                                    local v154
                                    while true do
                                        if (v153 == (0 + 0)) then
                                            v154 = 0 - 0
                                            while true do
                                                if ((1912 - (340 + 1571)) == v154) then
                                                    v33()
                                                    break
                                                end
                                                if (v154 == (765 - (468 + 297))) then
                                                    task.wait(562.1 - (334 + 228))
                                                    pcall(
                                                        function()
                                                            v24.CurrentData:Replicate(
                                                                v7(
                                                                    "\155\172\16\84\185\229\230\162\191\20\74\162\228\221\181",
                                                                    "\175\204\201\113\36\214\139"
                                                                )
                                                            )
                                                        end
                                                    )
                                                    v154 = 3 - 2
                                                end
                                            end
                                            break
                                        end
                                    end
                                end
                            )
                            return
                        end
                        if (v86 and (v118 == v86)) then
                            local v144 = 0 - 0
                            while true do
                                if (v144 == (1 - 0)) then
                                    v33()
                                    return
                                end
                                if ((1034 - (125 + 909)) == v144) then
                                    v27[v119[1 + 0]] = v27[v119[237 - (141 + 95)]] or {}
                                    v27[v119[1 + 0]][v119[2 + 0]] = v119[7 - 4] or nil
                                    v144 = 2 - 1
                                end
                            end
                        end
                        return v89(v118, ...)
                    end
                )
                break
            end
            if (v81 == 2) then
                v87 = v84 and v84:FindFirstChild(v7("\229\6\133\255\222\198\29", "\170\163\111\226\151"))
                v88 = v87 and v87:FindFirstChild(v7("\36\35\183\17\90\50\36", "\73\113\80\210\88\46\87"))
                if not v85 then
                    return
                end
                v89 = nil
                v81 = 1 + 2
            end
            if (v81 == (0 - 0)) then
                task.wait(1 + 0)
                if not hookmetamethod then
                    return
                end
                v82 = v9:FindFirstChild(v7("\230\193\227\83\192\193\253", "\60\180\164\142"))
                if not v82 then
                    return
                end
                v81 = 1 + 0
            end
        end
    end
)
local v45 = v23.GetViewModelImageFromWeaponData
v23.GetViewModelImageFromWeaponData = function(v90, v91, v92)
    local v93 = 0 - 0
    local v94
    local v95
    while true do
        if (v93 == (0 + 0)) then
            if not v91 then
                return v45(v90, v91, v92)
            end
            v94 = v91.Name
            v93 = 164 - (92 + 71)
        end
        if ((1 + 1) == v93) then
            return v45(v90, v91, v92)
        end
        if (v93 == (1 - 0)) then
            v95 =
                (v91.Skin and v26[v94] and (v91.Skin == v26[v94].Skin)) or ((v29 == v11) and v26[v94] and v26[v94].Skin)
            if (v95 and v26[v94] and v26[v94].Skin) then
                local v132 = 765 - (574 + 191)
                local v133
                while true do
                    if (v132 == 0) then
                        v133 = v90.ViewModels[v26[v94].Skin.Name]
                        if v133 then
                            return v133[
                                (v92 and
                                    v7(
                                        "\110\193\52\219\1\111\197\50\212\54\66\223\58\208\17\83\197\58\210",
                                        "\100\39\172\85\188"
                                    )) or
                                    v7("\132\117\184\135\54", "\83\205\24\217\224")
                            ] or v133.Image
                        end
                        break
                    end
                end
            end
            v93 = 1 + 1
        end
    end
end
task.spawn(
    function()
        task.wait(3 + 0)
        pcall(
            function()
                local v99 = 663 - (174 + 489)
                local v100
                local v101
                while true do
                    if (v99 == (0 - 0)) then
                        v100 = v13.Modules.ClientReplicatedClasses.ClientFighter.ClientItem
                        v101 = require(v100)
                        v99 = 1 + 0
                    end
                    if (v99 == (850 - (254 + 595))) then
                        if v101._CreateViewModel then
                            local v145 = v101._CreateViewModel
                            v101._CreateViewModel = function(v155, v156)
                                local v157 = 126 - (55 + 71)
                                local v158
                                local v159
                                local v160
                                while true do
                                    if (v157 == (1 - 0)) then
                                        v28 = ((v159 == v11) and v158) or nil
                                        if ((v159 == v11) and v26[v158] and v26[v158].Skin and v156) then
                                            pcall(
                                                function()
                                                    local v219 = 1790 - (573 + 1217)
                                                    local v220
                                                    local v221
                                                    local v222
                                                    while true do
                                                        if ((0 - 0) == v219) then
                                                            v220, v221, v222 =
                                                                v155:ToEnum(v7("\194\196\217\60", "\93\134\165\173")),
                                                                v155:ToEnum(
                                                                    v7(
                                                                        "\141\249\200\204",
                                                                        "\30\222\146\161\162\90\174\210"
                                                                    )
                                                                ),
                                                                v155:ToEnum(v7("\203\79\125\15", "\106\133\46\16"))
                                                            if v156[v220] then
                                                                v156[v220][v221] = v26[v158].Skin
                                                                v156[v220][v222] = v26[v158].Skin.Name
                                                            elseif v156.Data then
                                                                local v258 = 0 + 0
                                                                local v259
                                                                while true do
                                                                    if (v258 == (0 - 0)) then
                                                                        v259 = 0 - 0
                                                                        while true do
                                                                            if (v259 == (939 - (714 + 225))) then
                                                                                v156.Data.Skin = v26[v158].Skin
                                                                                v156.Data.Name = v26[v158].Skin.Name
                                                                                break
                                                                            end
                                                                        end
                                                                        break
                                                                    end
                                                                end
                                                            end
                                                            break
                                                        end
                                                    end
                                                end
                                            )
                                        end
                                        v157 = 5 - 3
                                    end
                                    if ((0 - 0) == v157) then
                                        v158 = v155.Name
                                        v159 = v155.ClientFighter and v155.ClientFighter.Player
                                        v157 = 2 - 1
                                    end
                                    if ((10 - 7) == v157) then
                                        return v160
                                    end
                                    if (v157 == 2) then
                                        v160 = v145(v155, v156)
                                        v28 = nil
                                        v157 = 3 - 0
                                    end
                                end
                            end
                        end
                        break
                    end
                end
            end
        )
        pcall(
            function()
                local v102 =
                    v13.Modules.ClientReplicatedClasses.ClientFighter.ClientItem:FindFirstChild(
                    v7("\123\44\122\249\84\84\110\41\118\235\119\79\92\37\127", "\32\56\64\19\156\58")
                )
                if v102 then
                    local v112 = require(v102)
                    if v112.GetWrap then
                        local v134 = 0 + 0
                        local v135
                        while true do
                            if (v134 == (0 - 0)) then
                                v135 = v112.GetWrap
                                v112.GetWrap = function(v182)
                                    local v183 = 0
                                    local v184
                                    local v185
                                    while true do
                                        local v192 = 806 - (118 + 688)
                                        while true do
                                            if (v192 == (48 - (25 + 23))) then
                                                if (v183 == (1249 - (111 + 1137))) then
                                                    local v234 = 158 - (91 + 67)
                                                    while true do
                                                        if (v234 == (0 + 0)) then
                                                            if (v184 and (v185 == v11) and v26[v184] and v26[v184].Wrap) then
                                                                return v26[v184].Wrap
                                                            end
                                                            return v135(v182)
                                                        end
                                                    end
                                                end
                                                if (v183 == (1886 - (927 + 959))) then
                                                    local v235 = 0 - 0
                                                    while true do
                                                        if (v235 == 0) then
                                                            v184 = v182.ClientItem and v182.ClientItem.Name
                                                            v185 =
                                                                v182.ClientItem and v182.ClientItem.ClientFighter and
                                                                v182.ClientItem.ClientFighter.Player
                                                            v235 = 1 + 0
                                                        end
                                                        if ((733 - (16 + 716)) == v235) then
                                                            v183 = 1 - 0
                                                            break
                                                        end
                                                    end
                                                end
                                                break
                                            end
                                        end
                                    end
                                end
                                break
                            end
                        end
                    end
                    local v113 = v112.new
                    v112.new = function(v121, v122)
                        local v123 = 97 - (11 + 86)
                        local v124
                        local v125
                        local v126
                        while true do
                            if (v123 == (4 - 2)) then
                                local v161 = 0
                                while true do
                                    if (v161 == (0 - 0)) then
                                        local v193 = 285 - (175 + 110)
                                        while true do
                                            if (v193 == (0 - 0)) then
                                                if ((v124 == v11) and v26[v125] and v26[v125].Wrap and v126._UpdateWrap) then
                                                    task.spawn(
                                                        function()
                                                            local v248 = 0 - 0
                                                            while true do
                                                                if (v248 == (1796 - (503 + 1293))) then
                                                                    v126:_UpdateWrap()
                                                                    task.wait(0.1 - 0)
                                                                    v248 = 2 - 1
                                                                end
                                                                if (v248 == (1 + 0)) then
                                                                    if not v126._destroyed then
                                                                        v126:_UpdateWrap()
                                                                    end
                                                                    break
                                                                end
                                                            end
                                                        end
                                                    )
                                                end
                                                return v126
                                            end
                                        end
                                    end
                                end
                            end
                            if (v123 == (1062 - (810 + 251))) then
                                if ((v124 == v11) and v26[v125]) then
                                    pcall(
                                        function()
                                            local v194 = 0
                                            local v195
                                            local v196
                                            local v197
                                            while true do
                                                if (v194 == (2 + 0)) then
                                                    if v197.Skin then
                                                        v121[v196][
                                                                v195:ToEnum(
                                                                    v7("\106\93\66\243", "\107\57\54\43\157\21\230\231")
                                                                )
                                                            ] = v197.Skin
                                                    end
                                                    if v197.Wrap then
                                                        v121[v196][
                                                                v195:ToEnum(
                                                                    v7(
                                                                        "\236\153\16\229",
                                                                        "\175\187\235\113\149\217\188"
                                                                    )
                                                                )
                                                            ] = v197.Wrap
                                                    end
                                                    v194 = 1 + 2
                                                end
                                                if (v194 == (1 + 0)) then
                                                    v121[v196] = v121[v196] or {}
                                                    v197 = v26[v125]
                                                    v194 = 535 - (43 + 490)
                                                end
                                                if (v194 == (0 - 0)) then
                                                    local v225 = 0
                                                    while true do
                                                        if (v225 == (733 - (711 + 22))) then
                                                            v195 = require(v9.Modules.ReplicatedClass)
                                                            v196 =
                                                                v195:ToEnum(
                                                                v7("\126\201\241\87", "\224\58\168\133\54\58\146")
                                                            )
                                                            v225 = 3 - 2
                                                        end
                                                        if (v225 == (1 - 0)) then
                                                            v194 = 860 - (240 + 619)
                                                            break
                                                        end
                                                    end
                                                end
                                                if (v194 == 3) then
                                                    if v197.Charm then
                                                        v121[v196][
                                                                v195:ToEnum(
                                                                    v7("\31\167\128\94\238", "\24\92\207\225\44\131\25")
                                                                )
                                                            ] = v197.Charm
                                                    end
                                                    break
                                                end
                                            end
                                        end
                                    )
                                end
                                v126 = v113(v121, v122)
                                v123 = 2
                            end
                            if (v123 == (0 + 0)) then
                                v124 = v122.ClientFighter and v122.ClientFighter.Player
                                v125 = v28 or v122.Name
                                v123 = 1 - 0
                            end
                        end
                    end
                end
            end
        )
        pcall(
            function()
                local v103 = require(v13.Modules.Pages.ViewProfile)
                if (v103 and v103.Fetch) then
                    local v115 = v103.Fetch
                    v103.Fetch = function(v127, v128)
                        v29 = v128
                        return v115(v127, v128)
                    end
                end
            end
        )
        pcall(
            function()
                local v104 = 0 - 0
                local v105
                while true do
                    if (v104 == (0 + 0)) then
                        v105 = require(v13.Modules.ClientReplicatedClasses.ClientEntity)
                        if v105.ReplicateFromServer then
                            local v147 = 1744 - (1344 + 400)
                            local v148
                            while true do
                                if (v147 == (0 - 0)) then
                                    v148 = v105.ReplicateFromServer
                                    v105.ReplicateFromServer = function(v198, v199, ...)
                                        local v200 = 0
                                        while true do
                                            if (v200 == 0) then
                                                if
                                                    (v199 ==
                                                        v7(
                                                            "\109\218\182\69\8\117\78\193\157\74\29\120\72\199",
                                                            "\29\43\179\216\44\123"
                                                        ))
                                                 then
                                                    local v242 = 405 - (255 + 150)
                                                    local v243
                                                    local v244
                                                    local v245
                                                    local v246
                                                    while true do
                                                        if (v242 == 2) then
                                                            v246 =
                                                                (tostring(v245) == v11.Name) or
                                                                (tostring(v245):lower() == v11.Name:lower())
                                                            if (v246 and v30 and v26[v30] and v26[v30].Finisher) then
                                                                local v260 = 0
                                                                local v261
                                                                local v262
                                                                while true do
                                                                    if (v260 == (1 + 0)) then
                                                                        if (not v262 and v21) then
                                                                            pcall(
                                                                                function()
                                                                                    v262 = v21:ToEnum(v261.Name)
                                                                                end
                                                                            )
                                                                        end
                                                                        if v262 then
                                                                            v243[1] = v262
                                                                            return v148(v198, v199, unpack(v243))
                                                                        end
                                                                        break
                                                                    end
                                                                    if (v260 == (0 + 0)) then
                                                                        v261 = v26[v30].Finisher
                                                                        v262 = v261.Enum
                                                                        v260 = 1
                                                                    end
                                                                end
                                                            end
                                                            break
                                                        end
                                                        if (v242 == (0 - 0)) then
                                                            v243 = {...}
                                                            v244 = v243[3]
                                                            v242 = 2 - 1
                                                        end
                                                        if (v242 == (1740 - (404 + 1335))) then
                                                            local v254 = 0 + 0
                                                            while true do
                                                                if (v254 == 1) then
                                                                    v242 = 408 - (183 + 223)
                                                                    break
                                                                end
                                                                if (v254 == (0 - 0)) then
                                                                    v245 = v244
                                                                    if
                                                                        ((type(v244) ==
                                                                            v7(
                                                                                "\168\202\37\94\185\216\52\77",
                                                                                "\44\221\185\64"
                                                                            )) and
                                                                            v21 and
                                                                            v21.FromEnum)
                                                                     then
                                                                        pcall(
                                                                            function()
                                                                                v245 = v21:FromEnum(v244)
                                                                            end
                                                                        )
                                                                    end
                                                                    v254 = 1 + 0
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                                return v148(v198, v199, ...)
                                            end
                                        end
                                    end
                                    break
                                end
                            end
                        end
                        break
                    end
                end
            end
        )
    end
)
v34()

local SpeedGroup = Tabs.Misc:AddLeftGroupbox('Speed Hack')

SpeedGroup:AddLabel('Using CFrame Method')

SpeedGroup:AddLabel('Keybind'):AddKeyPicker('SpeedHackKeybind', {
    Default = 'V',
    SyncToggleState = false,
    Mode = 'Toggle',
    Text = 'Speed Hack',
    Callback = function(Value)
        speedHackEnabled = Value
        if Value then
            applySpeedHack()
        else
            disableSpeedHack()
        end
    end
})
SpeedGroup:AddDivider()
SpeedGroup:AddSlider('SpeedMultiplier', {
    Text = 'Speed Multiplier',
    Default = 2.5,
    Min = 1,
    Max = 5,
    Rounding = 2,
    Compact = false,
    Suffix = 'x',
    Callback = function(Value)
        speedMultiplier = Value
    end
})

SpeedGroup:AddToggle('SpeedRandomization', {
    Text = 'Speed Randomization',
    Default = true,
    Callback = function(Value)
        speedRandomization = Value
    end
})

SpeedGroup:AddSlider('SpeedVariance', {
    Text = 'Variance Amount',
    Default = 0.1,
    Min = 0,
    Max = 0.3,
    Rounding = 2,
    Compact = false,
    Suffix = '%',
    Callback = function(Value)
        speedVariance = Value
    end
})

local CombatGroup = Tabs.Combat:AddRightGroupbox('Auto Crouch')

CombatGroup:AddLabel('Keybind'):AddKeyPicker('AutoCrouchKeybind', {
    Default = 'B',
    SyncToggleState = false,
    Mode = 'Toggle',
    Text = 'Auto Crouch',
    Callback = function(Value)
        if Value then
            startAutoCrouch()
        else
            stopAutoCrouch()
        end
    end
})

CombatGroup:AddDivider()
CombatGroup:AddLabel('Timing Settings')

CombatGroup:AddSlider('CrouchTime', {
    Text = 'Crouch Time',
    Default = 1,
    Min = 0.1,
    Max = 5,
    Rounding = 1,
    Compact = false,
    Suffix = 's',
    Callback = function(Value)
        crouchTime = Value
    end
})

CombatGroup:AddSlider('BeforeRepeatDelay', {
    Text = 'Before Repeat',
    Default = 0.5,
    Min = 0,
    Max = 1,
    Rounding = 2,
    Compact = false,
    Suffix = 's',
    Callback = function(Value)
        beforeRepeatDelay = Value
    end
})

CombatGroup:AddDivider()

local StreamGroup = Tabs.StreamProtection:AddLeftGroupbox('Username Changer')

local spoofedUsername = ""
local usernameEnabled = false

StreamGroup:AddInput('SpoofUsername', {
    Default = '',
    Numeric = false,
    Finished = false,
    Text = 'Spoofed Username',
    Placeholder = 'Enter username...',
    Callback = function(Value)
        spoofedUsername = Value
    end
})

StreamGroup:AddToggle('EnableUsernameChanger', {
    Text = 'Enable Username Changer',
    Default = false,
    Callback = function(Value)
        usernameEnabled = Value
        
        if Value and spoofedUsername ~= "" then
            xpcall(function()
                local G,P,LP=game,game:GetService("Players"),game:GetService("Players").LocalPlayer
                local fake=spoofedUsername
                local vid=LP.UserId
                local vn=LP.Name
                local dn=LP.DisplayName
                local function updateUI(obj)
                    if obj:IsA("TextLabel")or obj:IsA("TextButton")or obj:IsA("TextBox")then
                        if obj.Text:find(vn)or obj.Text:find(dn)then
                            obj.Text=obj.Text:gsub(vn,fake):gsub(dn,fake)
                        end
                        obj:GetPropertyChangedSignal("Text"):Connect(function()
                            obj.Text=obj.Text:gsub(vn,fake):gsub(dn,fake)
                        end)
                    end
                end
                for _,v in G:GetDescendants()do updateUI(v)end
                G.DescendantAdded:Connect(updateUI)
            end,function()end)
        elseif Value and spoofedUsername == "" then
            Options.EnableUsernameSpoof:SetValue(false)
        end
    end
})

Library:SetWatermarkVisibility(false)

local MenuGroup = Tabs.Settings:AddLeftGroupbox('Menu Controls')

MenuGroup:AddLabel('Toggle Menu Key'):AddKeyPicker('MenuKeybind', {
    Default = 'RightShift',
    NoUI = true,
    Text = 'Menu keybind'
})

MenuGroup:AddButton({
    Text = 'Close Menu',
    Func = function()
        if spinConnection then
            spinConnection:Disconnect()
            spinConnection = nil
        end
        if rainbowConnection then
            rainbowConnection:Disconnect()
            rainbowConnection = nil
        end
        if keybindUpdateConnection then
            keybindUpdateConnection:Disconnect()
            keybindUpdateConnection = nil
        end
        if speedConnection then
            speedConnection:Disconnect()
            speedConnection = nil
        end
        if espConnection then
            espConnection:Disconnect()
            espConnection = nil
        end
        stopAutoCrouch()
        disableSpeedHack()
        stopAimbot()
        stopESP()
        Library:Unload()
    end,
})

Library.ToggleKeybind = Options.MenuKeybind

local KeybindListGroup = Tabs.Settings:AddRightGroupbox('Keybind List')

KeybindListGroup:AddToggle('KeybindListToggle', {
    Text = 'Show Keybind List',
    Default = false,
    Callback = function(Value)
        keybindListEnabled = Value
        if Value then
            createKeybindList()
        elseif keybindListGui then
            keybindListGui.Enabled = false
        end
    end
})

KeybindListGroup:AddToggle('KeybindListAlwaysShow', {
    Text = 'Always Show',
    Default = true,
    Callback = function(Value)
        keybindListAlwaysShow = Value
    end
})

ThemeManager:SetLibrary(Library)
SaveManager:SetLibrary(Library)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({ 'MenuKeybind' })

ThemeManager:SetFolder('Reden.Hook')
SaveManager:SetFolder('Reden.Hook/configs')

SaveManager:BuildConfigSection(Tabs.Settings)
ThemeManager:ApplyToTab(Tabs.Settings)

print("===========================================================")
print("[Reden.Hook] Loaded Successfully")
print("[Reden.Hook] Press RightShift to toggle menu")
print("[Reden.Hook] Release Soon!!!")
print("===========================================================")
